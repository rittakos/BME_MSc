#version 430

layout(quads, equal_spacing, cw) in;

uniform mat4 MV;

in vec3 tcPosition[];
out vec3 tePosition;

void main()
{
	vec3 p1 = tcPosition[0];
	vec3 p2 = tcPosition[1];
	vec3 p3 = tcPosition[2];
	vec3 p4 = tcPosition[3];

	float u = gl_TessCoord.x;
	float v = gl_TessCoord.y;

	tePosition = u * (v * p1 + (1 - v) * p2) + (1 - u) * (v * p3 + (1 - v) * p4);
	gl_Position = MV * vec4(tePosition, 1);
}
